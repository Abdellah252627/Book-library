<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…ÙƒØªØ¨Ø© Ø£Ù…Ø© Ø§Ù‚Ø±Ø£</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">
        <h1>Ù…ÙƒØªØ¨Ø© Ø£Ù…Ø© Ø§Ù‚Ø±Ø£</h1>
      </div>
      <nav>
        <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="favorites.html">Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
        <a href="upload.html">Ø±ÙØ¹ ÙƒØªØ§Ø¨</a>
        <a href="chat.html">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</a>
        <a href="contact.html">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
        <a href="top-uploaders.html">Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø±Ù</a>
        <span id="admin-link" style="display:none">
          <a href="admin.html" style="color:#b8860b;font-weight:bold;">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</a>
        </span>
        <span id="profile-link" style="display:none">
          <a href="profile.html" style="color:#1a237e;font-weight:bold;">Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</a>
        </span>
        <a href="login.html" id="login-link" style="color:#fff; text-decoration:underline;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
        <button id="logout-btn" style="display:none; background:#e53e3e; color:#fff; border:none; padding:0.4rem 1.1rem; border-radius:6px; font-size:1rem; cursor:pointer;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        <span id="user-info" style="display:none; color:#fff; font-size:1.05rem;"></span>
        <span id="notif-center-link" style="position:relative;">
          <button id="notif-center-btn" style="background:none;border:none;cursor:pointer;font-size:1.5rem;vertical-align:middle;position:relative;">ğŸ””<span id="notif-center-count" style="display:none;position:absolute;top:-7px;right:-7px;background:#e53e3e;color:#fff;font-size:0.85rem;padding:0 6px;border-radius:50%;"></span></button>
          <div id="notif-center-list" style="display:none;position:absolute;top:2.2rem;right:0;min-width:270px;max-width:350px;background:#fff;border-radius:10px;box-shadow:0 2px 12px #0002;z-index:9999;text-align:right;max-height:350px;overflow-y:auto;"></div>
        </span>
        <button id="darkmode-btn" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ" style="background:none;border:none;cursor:pointer;font-size:1.5rem;vertical-align:middle;">ğŸŒ™</button>
      </nav>
    </div>
  </header>

  <main>
    <section id="stats-section" style="max-width:900px;margin:2.5rem auto 1.5rem auto;display:flex;gap:2rem;flex-wrap:wrap;justify-content:center;">
      <div class="stat-card" style="background:#fff;padding:1.2rem 2.2rem;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.07);min-width:180px;text-align:center;">
        <div style="font-size:2.1rem;">ğŸ“š</div>
        <div id="stat-books" style="font-size:1.3rem;font-weight:bold;">0</div>
        <div style="color:#666;">Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨</div>
      </div>
      <div class="stat-card" style="background:#fff;padding:1.2rem 2.2rem;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.07);min-width:180px;text-align:center;">
        <div style="font-size:2.1rem;">ğŸ‘¤</div>
        <div id="stat-users" style="font-size:1.3rem;font-weight:bold;">0</div>
        <div style="color:#666;">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
      </div>
      <div class="stat-card" style="background:#fff;padding:1.2rem 2.2rem;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.07);min-width:180px;text-align:center;">
        <div style="font-size:2.1rem;">â­ï¸</div>
        <div id="stat-fav-book" style="font-size:1.05rem;font-weight:bold;">â€”</div>
        <div style="color:#666;">Ø§Ù„Ø£ÙƒØ«Ø± Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©</div>
      </div>
      <div class="stat-card" style="background:#fff;padding:1.2rem 2.2rem;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.07);min-width:180px;text-align:center;">
        <div style="font-size:2.1rem;">ğŸ†</div>
        <div id="stat-top-rated" style="font-size:1.05rem;font-weight:bold;">â€”</div>
        <div style="color:#666;">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</div>
      </div>
      <div class="stat-card" style="background:#fff;padding:1.2rem 2.2rem;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.07);min-width:180px;text-align:center;">
        <div style="font-size:2.1rem;">ğŸ’¬</div>
        <div id="stat-comments" style="font-size:1.3rem;font-weight:bold;">0</div>
        <div style="color:#666;">Ø¹Ø¯Ø¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</div>
      </div>
    </section>

    <div id="advanced-filters" style="display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-bottom:1.2rem;justify-content:center;">
      <select id="filter-category" style="padding:0.4rem 1rem;border-radius:6px;">
        <option value="">ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>
      </select>
      <select id="filter-author" style="padding:0.4rem 1rem;border-radius:6px;">
        <option value="">ÙƒÙ„ Ø§Ù„Ù…Ø¤Ù„ÙÙŠÙ†</option>
      </select>
      <select id="filter-rating" style="padding:0.4rem 1rem;border-radius:6px;">
        <option value="">ÙƒÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</option>
        <option value="5">5 Ù†Ø¬ÙˆÙ…</option>
        <option value="4">4+ Ù†Ø¬ÙˆÙ…</option>
        <option value="3">3+ Ù†Ø¬ÙˆÙ…</option>
        <option value="2">2+ Ù†Ø¬ÙˆÙ…</option>
        <option value="1">1+ Ù†Ø¬Ù…Ø©</option>
      </select>
      <button id="apply-filters" style="background:#1a237e;color:#fff;padding:0.4rem 1.2rem;border:none;border-radius:6px;cursor:pointer;">ØªØµÙÙŠØ©</button>
    </div>

    <div style="display:flex; flex-wrap:wrap; gap:1rem; align-items:center; margin-bottom:1rem;justify-content:center;">
      <input type="text" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨..." style="flex:1; min-width:200px; max-width:400px; padding:0.5rem 1rem; border-radius:6px; border:1px solid #ddd;">
    </div>

    <div id="books-list">
      <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ¨ Ù‡Ù†Ø§ -->
    </div>

    <section id="random-books-section" style="margin:3rem auto 2rem auto;max-width:900px;">
      <h2 style="text-align:right;font-size:1.3rem;margin-bottom:1.2rem;">ÙƒØªØ¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</h2>
      <div id="random-books-list" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;"></div>
    </section>

    <section id="suggested-for-you-section" style="display:none;margin:2.5rem 0 1.5rem 0;">
      <h2 style="font-size:1.3rem;margin-bottom:1.1rem;color:#1a237e;">ğŸ“š ÙƒØªØ¨ Ù…Ù‚ØªØ±Ø­Ø© Ù„Ùƒ</h2>
      <div id="suggested-for-you-list" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1.2rem;"></div>
    </section>
  </main>

  <footer>
    <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; Ù…ÙƒØªØ¨Ø© Ø£Ù…Ø© Ø§Ù‚Ø±Ø£</p>
  </footer>

  <script src="auth-protect.js"></script>
  <script src="app.js"></script>
  <script src="notif.js"></script>
  <script>
    // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø§Ù„Ø¯Ø®ÙˆÙ„
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (currentUser) {
      document.getElementById('logout-btn').style.display = 'inline-block';
      document.getElementById('login-link').style.display = 'none';
      document.getElementById('user-info').style.display = 'inline-block';
      document.getElementById('user-info').textContent = 'Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ' + currentUser.name;
      document.getElementById('profile-link').style.display = 'inline-block';
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¤ÙˆÙ„
      if (currentUser.email === 'manager') {
        document.getElementById('admin-link').style.display = 'inline-block';
      }
    }

    document.getElementById('logout-btn').onclick = function() {
      localStorage.removeItem('currentUser');
      localStorage.removeItem('loggedInUser');
      window.location = 'login.html';
    };

    // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
    const darkBtn = document.getElementById('darkmode-btn');
    function setDarkMode(on) {
      if (on) {
        document.body.classList.add('dark');
        darkBtn.textContent = 'â˜€ï¸';
        localStorage.setItem('darkMode', '1');
      } else {
        document.body.classList.remove('dark');
        darkBtn.textContent = 'ğŸŒ™';
        localStorage.setItem('darkMode', '0');
      }
    }
    
    darkBtn.onclick = function() {
      setDarkMode(!document.body.classList.contains('dark'));
    };
    
    // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø­ÙÙˆØ¸Ø§Ù‹
    if (localStorage.getItem('darkMode') === '1') setDarkMode(true);
  </script>
</body>
</html> 